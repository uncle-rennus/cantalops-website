<section class="services-module {{ if .module.background_color }}bg-{{ .module.background_color }}{{ end }}">
  <div class="container">
    {{ if .module.title }}
    <h2 class="services-title">{{ .module.title | markdownify }}</h2>
    {{ end }}
    
    {{ if .module.subtitle }}
    <p class="services-subtitle">{{ .module.subtitle | markdownify }}</p>
    {{ end }}
    
    <div class="services-grid">
      {{ if .module.services }}
        {{ range .module.services }}
        <div class="service-card">
          {{ if .icon }}
          <div class="service-icon">{{ .icon | safeHTML }}</div>
          {{ end }}
          
          {{ if .title }}
          <h3 class="service-title">{{ .title | markdownify }}</h3>
          {{ end }}
          
          {{ if .description }}
          <p class="service-description">{{ .description | markdownify }}</p>
          {{ end }}
          
          {{ if .features }}
          <ul class="service-features">
            {{ range .features }}
            <li>{{ . | markdownify }}</li>
            {{ end }}
          </ul>
          {{ end }}
          
          {{ if .link }}
          <a href="{{ .link.url }}" class="service-link">{{ .link.text | default "Learn More" }}</a>
          {{ end }}
        </div>
        {{ end }}
      {{ else }}
        <!-- Fallback to site services if no module services defined -->
        {{ range (where .page.Site.Pages "Section" "services") }}
        <div class="service-card">
          {{ if .Params.icon }}
          <div class="service-icon">{{ .Params.icon | safeHTML }}</div>
          {{ end }}
          
          <h3 class="service-title">
            <a href="{{ .Permalink }}">{{ .Title }}</a>
          </h3>
          
          {{ if .Params.summary }}
          <p class="service-description">{{ .Params.summary }}</p>
          {{ end }}
          
          <a href="{{ .Permalink }}" class="service-link">Learn More</a>
        </div>
        {{ end }}
      {{ end }}
    </div>
    
    {{ if .module.button }}
    <div class="services-cta">
      <a href="{{ .module.button.url }}" class="btn {{ if .module.button.primary }}btn-primary{{ else }}btn-secondary{{ end }}">
        {{ .module.button.text }}
      </a>
    </div>
    {{ end }}
  </div>
</section>

